a1faea880527578c72f0cd045787bc55
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));
var _StyleSheet = _interopRequireDefault(require("../../StyleSheet/StyleSheet"));
var _Platform = _interopRequireDefault(require("../../Utilities/Platform"));
var _useMergeRefs = _interopRequireDefault(require("../../Utilities/useMergeRefs"));
var _AndroidSwitchNativeComponent = _interopRequireWildcard(require("./AndroidSwitchNativeComponent"));
var _SwitchNativeComponent = _interopRequireWildcard(require("./SwitchNativeComponent"));
var React = _interopRequireWildcard(require("react"));
var _jsxRuntime = require("react/jsx-runtime");
var _excluded = ["disabled", "ios_backgroundColor", "onChange", "onValueChange", "style", "thumbColor", "trackColor", "value"];
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != typeof e && "function" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }
var returnsFalse = function returnsFalse() {
  return false;
};
var returnsTrue = function returnsTrue() {
  return true;
};
var SwitchWithForwardedRef = React.forwardRef(function Switch(props, forwardedRef) {
  var disabled = props.disabled,
    ios_backgroundColor = props.ios_backgroundColor,
    onChange = props.onChange,
    onValueChange = props.onValueChange,
    style = props.style,
    thumbColor = props.thumbColor,
    trackColor = props.trackColor,
    value = props.value,
    restProps = (0, _objectWithoutProperties2.default)(props, _excluded);
  var trackColorForFalse = trackColor == null ? void 0 : trackColor.false;
  var trackColorForTrue = trackColor == null ? void 0 : trackColor.true;
  var nativeSwitchRef = React.useRef(null);
  var ref = (0, _useMergeRefs.default)(nativeSwitchRef, forwardedRef);
  var _React$useState = React.useState({
      value: null
    }),
    _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),
    native = _React$useState2[0],
    setNative = _React$useState2[1];
  var handleChange = function handleChange(event) {
    onChange == null ? void 0 : onChange(event);
    onValueChange == null ? void 0 : onValueChange(event.nativeEvent.value);
    setNative({
      value: event.nativeEvent.value
    });
  };
  React.useLayoutEffect(function () {
    var _nativeSwitchRef$curr;
    var jsValue = value === true;
    var shouldUpdateNativeSwitch = native.value != null && native.value !== jsValue;
    if (shouldUpdateNativeSwitch && ((_nativeSwitchRef$curr = nativeSwitchRef.current) == null ? void 0 : _nativeSwitchRef$curr.setNativeProps) != null) {
      if (_Platform.default.OS === 'android') {
        _AndroidSwitchNativeComponent.Commands.setNativeValue(nativeSwitchRef.current, jsValue);
      } else {
        _SwitchNativeComponent.Commands.setValue(nativeSwitchRef.current, jsValue);
      }
    }
  }, [value, native]);
  if (_Platform.default.OS === 'android') {
    var _props$accessibilityR;
    var accessibilityState = restProps.accessibilityState;
    var _disabled = disabled != null ? disabled : accessibilityState == null ? void 0 : accessibilityState.disabled;
    var _accessibilityState = _disabled !== (accessibilityState == null ? void 0 : accessibilityState.disabled) ? Object.assign({}, accessibilityState, {
      disabled: _disabled
    }) : accessibilityState;
    var platformProps = {
      accessibilityState: _accessibilityState,
      enabled: _disabled !== true,
      on: value === true,
      style: style,
      thumbTintColor: thumbColor,
      trackColorForFalse: trackColorForFalse,
      trackColorForTrue: trackColorForTrue,
      trackTintColor: value === true ? trackColorForTrue : trackColorForFalse
    };
    return (0, _jsxRuntime.jsx)(_AndroidSwitchNativeComponent.default, Object.assign({}, restProps, platformProps, {
      accessibilityRole: (_props$accessibilityR = props.accessibilityRole) != null ? _props$accessibilityR : 'switch',
      onChange: handleChange,
      onResponderTerminationRequest: returnsFalse,
      onStartShouldSetResponder: returnsTrue,
      ref: ref
    }));
  } else {
    var _props$accessibilityR2;
    var _platformProps = {
      disabled: disabled,
      onTintColor: trackColorForTrue,
      style: _StyleSheet.default.compose({
        height: 31,
        width: 51
      }, _StyleSheet.default.compose(style, ios_backgroundColor == null ? null : {
        backgroundColor: ios_backgroundColor,
        borderRadius: 16
      })),
      thumbTintColor: thumbColor,
      tintColor: trackColorForFalse,
      value: value === true
    };
    return (0, _jsxRuntime.jsx)(_SwitchNativeComponent.default, Object.assign({}, restProps, _platformProps, {
      accessibilityRole: (_props$accessibilityR2 = props.accessibilityRole) != null ? _props$accessibilityR2 : 'switch',
      onChange: handleChange,
      onResponderTerminationRequest: returnsFalse,
      onStartShouldSetResponder: returnsTrue,
      ref: ref
    }));
  }
});
var _default = exports.default = SwitchWithForwardedRef;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfU3R5bGVTaGVldCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX1BsYXRmb3JtIiwiX3VzZU1lcmdlUmVmcyIsIl9BbmRyb2lkU3dpdGNoTmF0aXZlQ29tcG9uZW50IiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfU3dpdGNoTmF0aXZlQ29tcG9uZW50IiwiUmVhY3QiLCJfanN4UnVudGltZSIsIl9leGNsdWRlZCIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsImUiLCJXZWFrTWFwIiwiciIsInQiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImhhcyIsImdldCIsIm4iLCJfX3Byb3RvX18iLCJhIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaSIsInNldCIsInJldHVybnNGYWxzZSIsInJldHVybnNUcnVlIiwiU3dpdGNoV2l0aEZvcndhcmRlZFJlZiIsImZvcndhcmRSZWYiLCJTd2l0Y2giLCJwcm9wcyIsImZvcndhcmRlZFJlZiIsImRpc2FibGVkIiwiaW9zX2JhY2tncm91bmRDb2xvciIsIm9uQ2hhbmdlIiwib25WYWx1ZUNoYW5nZSIsInN0eWxlIiwidGh1bWJDb2xvciIsInRyYWNrQ29sb3IiLCJ2YWx1ZSIsInJlc3RQcm9wcyIsIl9vYmplY3RXaXRob3V0UHJvcGVydGllczIiLCJ0cmFja0NvbG9yRm9yRmFsc2UiLCJmYWxzZSIsInRyYWNrQ29sb3JGb3JUcnVlIiwidHJ1ZSIsIm5hdGl2ZVN3aXRjaFJlZiIsInVzZVJlZiIsInJlZiIsInVzZU1lcmdlUmVmcyIsIl9SZWFjdCR1c2VTdGF0ZSIsInVzZVN0YXRlIiwiX1JlYWN0JHVzZVN0YXRlMiIsIl9zbGljZWRUb0FycmF5MiIsIm5hdGl2ZSIsInNldE5hdGl2ZSIsImhhbmRsZUNoYW5nZSIsImV2ZW50IiwibmF0aXZlRXZlbnQiLCJ1c2VMYXlvdXRFZmZlY3QiLCJfbmF0aXZlU3dpdGNoUmVmJGN1cnIiLCJqc1ZhbHVlIiwic2hvdWxkVXBkYXRlTmF0aXZlU3dpdGNoIiwiY3VycmVudCIsInNldE5hdGl2ZVByb3BzIiwiUGxhdGZvcm0iLCJPUyIsIkFuZHJvaWRTd2l0Y2hDb21tYW5kcyIsInNldE5hdGl2ZVZhbHVlIiwiU3dpdGNoQ29tbWFuZHMiLCJzZXRWYWx1ZSIsIl9wcm9wcyRhY2Nlc3NpYmlsaXR5UiIsImFjY2Vzc2liaWxpdHlTdGF0ZSIsIl9kaXNhYmxlZCIsIl9hY2Nlc3NpYmlsaXR5U3RhdGUiLCJhc3NpZ24iLCJwbGF0Zm9ybVByb3BzIiwiZW5hYmxlZCIsIm9uIiwidGh1bWJUaW50Q29sb3IiLCJ0cmFja1RpbnRDb2xvciIsImpzeCIsImFjY2Vzc2liaWxpdHlSb2xlIiwib25SZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QiLCJvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyIiwiX3Byb3BzJGFjY2Vzc2liaWxpdHlSMiIsIm9uVGludENvbG9yIiwiU3R5bGVTaGVldCIsImNvbXBvc2UiLCJoZWlnaHQiLCJ3aWR0aCIsImJhY2tncm91bmRDb2xvciIsImJvcmRlclJhZGl1cyIsInRpbnRDb2xvciIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIlN3aXRjaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3cgc3RyaWN0LWxvY2FsXG4gKiBAZm9ybWF0XG4gKiBAZ2VuZXJhdGUtZG9jc1xuICovXG5cbmltcG9ydCB0eXBlIHtDb2xvclZhbHVlfSBmcm9tICcuLi8uLi9TdHlsZVNoZWV0L1N0eWxlU2hlZXQnO1xuaW1wb3J0IHR5cGUge1N5bnRoZXRpY0V2ZW50fSBmcm9tICcuLi8uLi9UeXBlcy9Db3JlRXZlbnRUeXBlcyc7XG5pbXBvcnQgdHlwZSB7Vmlld1Byb3BzfSBmcm9tICcuLi9WaWV3L1ZpZXdQcm9wVHlwZXMnO1xuXG5pbXBvcnQgU3R5bGVTaGVldCBmcm9tICcuLi8uLi9TdHlsZVNoZWV0L1N0eWxlU2hlZXQnO1xuaW1wb3J0IFBsYXRmb3JtIGZyb20gJy4uLy4uL1V0aWxpdGllcy9QbGF0Zm9ybSc7XG5pbXBvcnQgdXNlTWVyZ2VSZWZzIGZyb20gJy4uLy4uL1V0aWxpdGllcy91c2VNZXJnZVJlZnMnO1xuaW1wb3J0IEFuZHJvaWRTd2l0Y2hOYXRpdmVDb21wb25lbnQsIHtcbiAgQ29tbWFuZHMgYXMgQW5kcm9pZFN3aXRjaENvbW1hbmRzLFxufSBmcm9tICcuL0FuZHJvaWRTd2l0Y2hOYXRpdmVDb21wb25lbnQnO1xuaW1wb3J0IFN3aXRjaE5hdGl2ZUNvbXBvbmVudCwge1xuICBDb21tYW5kcyBhcyBTd2l0Y2hDb21tYW5kcyxcbn0gZnJvbSAnLi9Td2l0Y2hOYXRpdmVDb21wb25lbnQnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG50eXBlIFN3aXRjaENoYW5nZUV2ZW50ID0gU3ludGhldGljRXZlbnQ8XG4gICRSZWFkT25seTx7fFxuICAgIHZhbHVlOiBib29sZWFuLFxuICAgIHRhcmdldDogbnVtYmVyLFxuICB8fT4sXG4+O1xuXG5leHBvcnQgdHlwZSBQcm9wcyA9ICRSZWFkT25seTx7fFxuICAuLi5WaWV3UHJvcHMsXG5cbiAgLyoqXG4gICAgSWYgdHJ1ZSB0aGUgdXNlciB3b24ndCBiZSBhYmxlIHRvIHRvZ2dsZSB0aGUgc3dpdGNoLlxuXG4gICAgQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIGRpc2FibGVkPzogP2Jvb2xlYW4sXG5cbiAgLyoqXG4gICAgVGhlIHZhbHVlIG9mIHRoZSBzd2l0Y2guIElmIHRydWUgdGhlIHN3aXRjaCB3aWxsIGJlIHR1cm5lZCBvbi5cblxuICAgIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICB2YWx1ZT86ID9ib29sZWFuLFxuXG4gIC8qKlxuICAgIENvbG9yIG9mIHRoZSBmb3JlZ3JvdW5kIHN3aXRjaCBncmlwLiBJZiB0aGlzIGlzIHNldCBvbiBpT1MsIHRoZSBzd2l0Y2ggZ3JpcCB3aWxsIGxvc2UgaXRzIGRyb3Agc2hhZG93LlxuICAgKi9cbiAgdGh1bWJDb2xvcj86ID9Db2xvclZhbHVlLFxuXG4gIC8qKlxuICAgIEN1c3RvbSBjb2xvcnMgZm9yIHRoZSBzd2l0Y2ggdHJhY2suXG5cbiAgICBfaU9TXzogV2hlbiB0aGUgc3dpdGNoIHZhbHVlIGlzIGZhbHNlLCB0aGUgdHJhY2sgc2hyaW5rcyBpbnRvIHRoZSBib3JkZXIuIElmIHlvdSB3YW50IHRvIGNoYW5nZSB0aGVcbiAgICBjb2xvciBvZiB0aGUgYmFja2dyb3VuZCBleHBvc2VkIGJ5IHRoZSBzaHJ1bmtlbiB0cmFjaywgdXNlXG4gICAgIFtgaW9zX2JhY2tncm91bmRDb2xvcmBdKGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3Mvc3dpdGNoI2lvc19iYWNrZ3JvdW5kQ29sb3IpLlxuICAgKi9cbiAgdHJhY2tDb2xvcj86ID8kUmVhZE9ubHk8e3xcbiAgICBmYWxzZT86ID9Db2xvclZhbHVlLFxuICAgIHRydWU/OiA/Q29sb3JWYWx1ZSxcbiAgfH0+LFxuXG4gIC8qKlxuICAgIE9uIGlPUywgY3VzdG9tIGNvbG9yIGZvciB0aGUgYmFja2dyb3VuZC4gVGhpcyBiYWNrZ3JvdW5kIGNvbG9yIGNhbiBiZVxuICAgIHNlZW4gZWl0aGVyIHdoZW4gdGhlIHN3aXRjaCB2YWx1ZSBpcyBmYWxzZSBvciB3aGVuIHRoZSBzd2l0Y2ggaXNcbiAgICBkaXNhYmxlZCAoYW5kIHRoZSBzd2l0Y2ggaXMgdHJhbnNsdWNlbnQpLlxuICAgKi9cbiAgaW9zX2JhY2tncm91bmRDb2xvcj86ID9Db2xvclZhbHVlLFxuXG4gIC8qKlxuICAgIEludm9rZWQgd2hlbiB0aGUgdXNlciB0cmllcyB0byBjaGFuZ2UgdGhlIHZhbHVlIG9mIHRoZSBzd2l0Y2guIFJlY2VpdmVzXG4gICAgdGhlIGNoYW5nZSBldmVudCBhcyBhbiBhcmd1bWVudC4gSWYgeW91IHdhbnQgdG8gb25seSByZWNlaXZlIHRoZSBuZXdcbiAgICB2YWx1ZSwgdXNlIGBvblZhbHVlQ2hhbmdlYCBpbnN0ZWFkLlxuICAgKi9cbiAgb25DaGFuZ2U/OiA/KGV2ZW50OiBTd2l0Y2hDaGFuZ2VFdmVudCkgPT4gUHJvbWlzZTx2b2lkPiB8IHZvaWQsXG5cbiAgLyoqXG4gICAgSW52b2tlZCB3aGVuIHRoZSB1c2VyIHRyaWVzIHRvIGNoYW5nZSB0aGUgdmFsdWUgb2YgdGhlIHN3aXRjaC4gUmVjZWl2ZXNcbiAgICB0aGUgbmV3IHZhbHVlIGFzIGFuIGFyZ3VtZW50LiBJZiB5b3Ugd2FudCB0byBpbnN0ZWFkIHJlY2VpdmUgYW4gZXZlbnQsXG4gICAgdXNlIGBvbkNoYW5nZWAuXG4gICAqL1xuICBvblZhbHVlQ2hhbmdlPzogPyh2YWx1ZTogYm9vbGVhbikgPT4gUHJvbWlzZTx2b2lkPiB8IHZvaWQsXG58fT47XG5jb25zdCByZXR1cm5zRmFsc2UgPSAoKSA9PiBmYWxzZTtcbmNvbnN0IHJldHVybnNUcnVlID0gKCkgPT4gdHJ1ZTtcblxuLyoqXG4gIFJlbmRlcnMgYSBib29sZWFuIGlucHV0LlxuXG4gIFRoaXMgaXMgYSBjb250cm9sbGVkIGNvbXBvbmVudCB0aGF0IHJlcXVpcmVzIGFuIGBvblZhbHVlQ2hhbmdlYFxuICBjYWxsYmFjayB0aGF0IHVwZGF0ZXMgdGhlIGB2YWx1ZWAgcHJvcCBpbiBvcmRlciBmb3IgdGhlIGNvbXBvbmVudCB0b1xuICByZWZsZWN0IHVzZXIgYWN0aW9ucy4gSWYgdGhlIGB2YWx1ZWAgcHJvcCBpcyBub3QgdXBkYXRlZCwgdGhlXG4gIGNvbXBvbmVudCB3aWxsIGNvbnRpbnVlIHRvIHJlbmRlciB0aGUgc3VwcGxpZWQgYHZhbHVlYCBwcm9wIGluc3RlYWQgb2ZcbiAgdGhlIGV4cGVjdGVkIHJlc3VsdCBvZiBhbnkgdXNlciBhY3Rpb25zLlxuXG4gIGBgYFNuYWNrUGxheWVyIG5hbWU9U3dpdGNoXG4gIGltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuICBpbXBvcnQgeyBWaWV3LCBTd2l0Y2gsIFN0eWxlU2hlZXQgfSBmcm9tIFwicmVhY3QtbmF0aXZlXCI7XG5cbiAgY29uc3QgQXBwID0gKCkgPT4ge1xuICAgIGNvbnN0IFtpc0VuYWJsZWQsIHNldElzRW5hYmxlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgdG9nZ2xlU3dpdGNoID0gKCkgPT4gc2V0SXNFbmFibGVkKHByZXZpb3VzU3RhdGUgPT4gIXByZXZpb3VzU3RhdGUpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxWaWV3IHN0eWxlPXtzdHlsZXMuY29udGFpbmVyfT5cbiAgICAgICAgPFN3aXRjaFxuICAgICAgICAgIHRyYWNrQ29sb3I9e3sgZmFsc2U6IFwiIzc2NzU3N1wiLCB0cnVlOiBcIiM4MWIwZmZcIiB9fVxuICAgICAgICAgIHRodW1iQ29sb3I9e2lzRW5hYmxlZCA/IFwiI2Y1ZGQ0YlwiIDogXCIjZjRmM2Y0XCJ9XG4gICAgICAgICAgaW9zX2JhY2tncm91bmRDb2xvcj1cIiMzZTNlM2VcIlxuICAgICAgICAgIG9uVmFsdWVDaGFuZ2U9e3RvZ2dsZVN3aXRjaH1cbiAgICAgICAgICB2YWx1ZT17aXNFbmFibGVkfVxuICAgICAgICAvPlxuICAgICAgPC9WaWV3PlxuICAgICk7XG4gIH1cblxuICBjb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gICAgY29udGFpbmVyOiB7XG4gICAgICBmbGV4OiAxLFxuICAgICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAgICAgIGp1c3RpZnlDb250ZW50OiBcImNlbnRlclwiXG4gICAgfVxuICB9KTtcblxuICBleHBvcnQgZGVmYXVsdCBBcHA7XG4gIGBgYFxuICovXG5cbmNvbnN0IFN3aXRjaFdpdGhGb3J3YXJkZWRSZWY6IFJlYWN0LkFic3RyYWN0Q29tcG9uZW50PFxuICBQcm9wcyxcbiAgUmVhY3QuRWxlbWVudFJlZjxcbiAgICB0eXBlb2YgU3dpdGNoTmF0aXZlQ29tcG9uZW50IHwgdHlwZW9mIEFuZHJvaWRTd2l0Y2hOYXRpdmVDb21wb25lbnQsXG4gID4sXG4+ID0gUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiBTd2l0Y2gocHJvcHMsIGZvcndhcmRlZFJlZik6IFJlYWN0Lk5vZGUge1xuICBjb25zdCB7XG4gICAgZGlzYWJsZWQsXG4gICAgaW9zX2JhY2tncm91bmRDb2xvcixcbiAgICBvbkNoYW5nZSxcbiAgICBvblZhbHVlQ2hhbmdlLFxuICAgIHN0eWxlLFxuICAgIHRodW1iQ29sb3IsXG4gICAgdHJhY2tDb2xvcixcbiAgICB2YWx1ZSxcbiAgICAuLi5yZXN0UHJvcHNcbiAgfSA9IHByb3BzO1xuICBjb25zdCB0cmFja0NvbG9yRm9yRmFsc2UgPSB0cmFja0NvbG9yPy5mYWxzZTtcbiAgY29uc3QgdHJhY2tDb2xvckZvclRydWUgPSB0cmFja0NvbG9yPy50cnVlO1xuXG4gIGNvbnN0IG5hdGl2ZVN3aXRjaFJlZiA9IFJlYWN0LnVzZVJlZjxSZWFjdC5FbGVtZW50UmVmPFxuICAgIHR5cGVvZiBTd2l0Y2hOYXRpdmVDb21wb25lbnQgfCB0eXBlb2YgQW5kcm9pZFN3aXRjaE5hdGl2ZUNvbXBvbmVudCxcbiAgPiB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IHJlZiA9IHVzZU1lcmdlUmVmcyhuYXRpdmVTd2l0Y2hSZWYsIGZvcndhcmRlZFJlZik7XG5cbiAgY29uc3QgW25hdGl2ZSwgc2V0TmF0aXZlXSA9IFJlYWN0LnVzZVN0YXRlKHt2YWx1ZTogKG51bGw6ID9ib29sZWFuKX0pO1xuXG4gIGNvbnN0IGhhbmRsZUNoYW5nZSA9IChldmVudDogU3dpdGNoQ2hhbmdlRXZlbnQpID0+IHtcbiAgICAvLyAkRmxvd0ZpeE1lW3VudXNlZC1wcm9taXNlXVxuICAgIG9uQ2hhbmdlPy4oZXZlbnQpO1xuICAgIC8vICRGbG93Rml4TWVbdW51c2VkLXByb21pc2VdXG4gICAgb25WYWx1ZUNoYW5nZT8uKGV2ZW50Lm5hdGl2ZUV2ZW50LnZhbHVlKTtcbiAgICBzZXROYXRpdmUoe3ZhbHVlOiBldmVudC5uYXRpdmVFdmVudC52YWx1ZX0pO1xuICB9O1xuXG4gIFJlYWN0LnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgLy8gVGhpcyBpcyBuZWNlc3NhcnkgaW4gY2FzZSBuYXRpdmUgdXBkYXRlcyB0aGUgc3dpdGNoIGFuZCBKUyBkZWNpZGVzXG4gICAgLy8gdGhhdCB0aGUgdXBkYXRlIHNob3VsZCBiZSBpZ25vcmVkIGFuZCB3ZSBzaG91bGQgc3RpY2sgd2l0aCB0aGUgdmFsdWVcbiAgICAvLyB0aGF0IHdlIGhhdmUgaW4gSlMuXG4gICAgY29uc3QganNWYWx1ZSA9IHZhbHVlID09PSB0cnVlO1xuICAgIGNvbnN0IHNob3VsZFVwZGF0ZU5hdGl2ZVN3aXRjaCA9XG4gICAgICBuYXRpdmUudmFsdWUgIT0gbnVsbCAmJiBuYXRpdmUudmFsdWUgIT09IGpzVmFsdWU7XG4gICAgaWYgKFxuICAgICAgc2hvdWxkVXBkYXRlTmF0aXZlU3dpdGNoICYmXG4gICAgICBuYXRpdmVTd2l0Y2hSZWYuY3VycmVudD8uc2V0TmF0aXZlUHJvcHMgIT0gbnVsbFxuICAgICkge1xuICAgICAgaWYgKFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCcpIHtcbiAgICAgICAgQW5kcm9pZFN3aXRjaENvbW1hbmRzLnNldE5hdGl2ZVZhbHVlKG5hdGl2ZVN3aXRjaFJlZi5jdXJyZW50LCBqc1ZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFN3aXRjaENvbW1hbmRzLnNldFZhbHVlKG5hdGl2ZVN3aXRjaFJlZi5jdXJyZW50LCBqc1ZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFt2YWx1ZSwgbmF0aXZlXSk7XG5cbiAgaWYgKFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCcpIHtcbiAgICBjb25zdCB7YWNjZXNzaWJpbGl0eVN0YXRlfSA9IHJlc3RQcm9wcztcbiAgICBjb25zdCBfZGlzYWJsZWQgPVxuICAgICAgZGlzYWJsZWQgIT0gbnVsbCA/IGRpc2FibGVkIDogYWNjZXNzaWJpbGl0eVN0YXRlPy5kaXNhYmxlZDtcblxuICAgIGNvbnN0IF9hY2Nlc3NpYmlsaXR5U3RhdGUgPVxuICAgICAgX2Rpc2FibGVkICE9PSBhY2Nlc3NpYmlsaXR5U3RhdGU/LmRpc2FibGVkXG4gICAgICAgID8gey4uLmFjY2Vzc2liaWxpdHlTdGF0ZSwgZGlzYWJsZWQ6IF9kaXNhYmxlZH1cbiAgICAgICAgOiBhY2Nlc3NpYmlsaXR5U3RhdGU7XG5cbiAgICBjb25zdCBwbGF0Zm9ybVByb3BzID0ge1xuICAgICAgYWNjZXNzaWJpbGl0eVN0YXRlOiBfYWNjZXNzaWJpbGl0eVN0YXRlLFxuICAgICAgZW5hYmxlZDogX2Rpc2FibGVkICE9PSB0cnVlLFxuICAgICAgb246IHZhbHVlID09PSB0cnVlLFxuICAgICAgc3R5bGUsXG4gICAgICB0aHVtYlRpbnRDb2xvcjogdGh1bWJDb2xvcixcbiAgICAgIHRyYWNrQ29sb3JGb3JGYWxzZTogdHJhY2tDb2xvckZvckZhbHNlLFxuICAgICAgdHJhY2tDb2xvckZvclRydWU6IHRyYWNrQ29sb3JGb3JUcnVlLFxuICAgICAgdHJhY2tUaW50Q29sb3I6IHZhbHVlID09PSB0cnVlID8gdHJhY2tDb2xvckZvclRydWUgOiB0cmFja0NvbG9yRm9yRmFsc2UsXG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8QW5kcm9pZFN3aXRjaE5hdGl2ZUNvbXBvbmVudFxuICAgICAgICB7Li4ucmVzdFByb3BzfVxuICAgICAgICB7Li4ucGxhdGZvcm1Qcm9wc31cbiAgICAgICAgYWNjZXNzaWJpbGl0eVJvbGU9e3Byb3BzLmFjY2Vzc2liaWxpdHlSb2xlID8/ICdzd2l0Y2gnfVxuICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfVxuICAgICAgICBvblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdD17cmV0dXJuc0ZhbHNlfVxuICAgICAgICBvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyPXtyZXR1cm5zVHJ1ZX1cbiAgICAgICAgcmVmPXtyZWZ9XG4gICAgICAvPlxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgcGxhdGZvcm1Qcm9wcyA9IHtcbiAgICAgIGRpc2FibGVkLFxuICAgICAgb25UaW50Q29sb3I6IHRyYWNrQ29sb3JGb3JUcnVlLFxuICAgICAgc3R5bGU6IFN0eWxlU2hlZXQuY29tcG9zZShcbiAgICAgICAge2hlaWdodDogMzEsIHdpZHRoOiA1MX0sXG4gICAgICAgIFN0eWxlU2hlZXQuY29tcG9zZShcbiAgICAgICAgICBzdHlsZSxcbiAgICAgICAgICBpb3NfYmFja2dyb3VuZENvbG9yID09IG51bGxcbiAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBpb3NfYmFja2dyb3VuZENvbG9yLFxuICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogMTYsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICksXG4gICAgICApLFxuICAgICAgdGh1bWJUaW50Q29sb3I6IHRodW1iQ29sb3IsXG4gICAgICB0aW50Q29sb3I6IHRyYWNrQ29sb3JGb3JGYWxzZSxcbiAgICAgIHZhbHVlOiB2YWx1ZSA9PT0gdHJ1ZSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxTd2l0Y2hOYXRpdmVDb21wb25lbnRcbiAgICAgICAgey4uLnJlc3RQcm9wc31cbiAgICAgICAgey4uLnBsYXRmb3JtUHJvcHN9XG4gICAgICAgIGFjY2Vzc2liaWxpdHlSb2xlPXtwcm9wcy5hY2Nlc3NpYmlsaXR5Um9sZSA/PyAnc3dpdGNoJ31cbiAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX1cbiAgICAgICAgb25SZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3Q9e3JldHVybnNGYWxzZX1cbiAgICAgICAgb25TdGFydFNob3VsZFNldFJlc3BvbmRlcj17cmV0dXJuc1RydWV9XG4gICAgICAgIHJlZj17cmVmfVxuICAgICAgLz5cbiAgICApO1xuICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgU3dpdGNoV2l0aEZvcndhcmRlZFJlZjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQWVBLElBQUFBLFdBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFNBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLGFBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLDZCQUFBLEdBQUFDLHVCQUFBLENBQUFKLE9BQUE7QUFHQSxJQUFBSyxzQkFBQSxHQUFBRCx1QkFBQSxDQUFBSixPQUFBO0FBR0EsSUFBQU0sS0FBQSxHQUFBRix1QkFBQSxDQUFBSixPQUFBO0FBQStCLElBQUFPLFdBQUEsR0FBQVAsT0FBQTtBQUFBLElBQUFRLFNBQUE7QUFBQSxTQUFBQyx5QkFBQUMsQ0FBQSw2QkFBQUMsT0FBQSxtQkFBQUMsQ0FBQSxPQUFBRCxPQUFBLElBQUFFLENBQUEsT0FBQUYsT0FBQSxZQUFBRix3QkFBQSxZQUFBQSx5QkFBQUMsQ0FBQSxXQUFBQSxDQUFBLEdBQUFHLENBQUEsR0FBQUQsQ0FBQSxLQUFBRixDQUFBO0FBQUEsU0FBQU4sd0JBQUFNLENBQUEsRUFBQUUsQ0FBQSxTQUFBQSxDQUFBLElBQUFGLENBQUEsSUFBQUEsQ0FBQSxDQUFBSSxVQUFBLFNBQUFKLENBQUEsZUFBQUEsQ0FBQSx1QkFBQUEsQ0FBQSx5QkFBQUEsQ0FBQSxXQUFBSyxPQUFBLEVBQUFMLENBQUEsUUFBQUcsQ0FBQSxHQUFBSix3QkFBQSxDQUFBRyxDQUFBLE9BQUFDLENBQUEsSUFBQUEsQ0FBQSxDQUFBRyxHQUFBLENBQUFOLENBQUEsVUFBQUcsQ0FBQSxDQUFBSSxHQUFBLENBQUFQLENBQUEsT0FBQVEsQ0FBQSxLQUFBQyxTQUFBLFVBQUFDLENBQUEsR0FBQUMsTUFBQSxDQUFBQyxjQUFBLElBQUFELE1BQUEsQ0FBQUUsd0JBQUEsV0FBQUMsQ0FBQSxJQUFBZCxDQUFBLG9CQUFBYyxDQUFBLElBQUFILE1BQUEsQ0FBQUksU0FBQSxDQUFBQyxjQUFBLENBQUFDLElBQUEsQ0FBQWpCLENBQUEsRUFBQWMsQ0FBQSxTQUFBSSxDQUFBLEdBQUFSLENBQUEsR0FBQUMsTUFBQSxDQUFBRSx3QkFBQSxDQUFBYixDQUFBLEVBQUFjLENBQUEsVUFBQUksQ0FBQSxLQUFBQSxDQUFBLENBQUFYLEdBQUEsSUFBQVcsQ0FBQSxDQUFBQyxHQUFBLElBQUFSLE1BQUEsQ0FBQUMsY0FBQSxDQUFBSixDQUFBLEVBQUFNLENBQUEsRUFBQUksQ0FBQSxJQUFBVixDQUFBLENBQUFNLENBQUEsSUFBQWQsQ0FBQSxDQUFBYyxDQUFBLFlBQUFOLENBQUEsQ0FBQUgsT0FBQSxHQUFBTCxDQUFBLEVBQUFHLENBQUEsSUFBQUEsQ0FBQSxDQUFBZ0IsR0FBQSxDQUFBbkIsQ0FBQSxFQUFBUSxDQUFBLEdBQUFBLENBQUE7QUFnRS9CLElBQU1ZLFlBQVksR0FBRyxTQUFmQSxZQUFZQSxDQUFBO0VBQUEsT0FBUyxLQUFLO0FBQUE7QUFDaEMsSUFBTUMsV0FBVyxHQUFHLFNBQWRBLFdBQVdBLENBQUE7RUFBQSxPQUFTLElBQUk7QUFBQTtBQTRDOUIsSUFBTUMsc0JBS0wsR0FBRzFCLEtBQUssQ0FBQzJCLFVBQVUsQ0FBQyxTQUFTQyxNQUFNQSxDQUFDQyxLQUFLLEVBQUVDLFlBQVksRUFBYztFQUNwRSxJQUNFQyxRQUFRLEdBU05GLEtBQUssQ0FUUEUsUUFBUTtJQUNSQyxtQkFBbUIsR0FRakJILEtBQUssQ0FSUEcsbUJBQW1CO0lBQ25CQyxRQUFRLEdBT05KLEtBQUssQ0FQUEksUUFBUTtJQUNSQyxhQUFhLEdBTVhMLEtBQUssQ0FOUEssYUFBYTtJQUNiQyxLQUFLLEdBS0hOLEtBQUssQ0FMUE0sS0FBSztJQUNMQyxVQUFVLEdBSVJQLEtBQUssQ0FKUE8sVUFBVTtJQUNWQyxVQUFVLEdBR1JSLEtBQUssQ0FIUFEsVUFBVTtJQUNWQyxLQUFLLEdBRUhULEtBQUssQ0FGUFMsS0FBSztJQUNGQyxTQUFTLE9BQUFDLHlCQUFBLENBQUEvQixPQUFBLEVBQ1ZvQixLQUFLLEVBQUEzQixTQUFBO0VBQ1QsSUFBTXVDLGtCQUFrQixHQUFHSixVQUFVLG9CQUFWQSxVQUFVLENBQUVLLEtBQUs7RUFDNUMsSUFBTUMsaUJBQWlCLEdBQUdOLFVBQVUsb0JBQVZBLFVBQVUsQ0FBRU8sSUFBSTtFQUUxQyxJQUFNQyxlQUFlLEdBQUc3QyxLQUFLLENBQUM4QyxNQUFNLENBRTFCLElBQUksQ0FBQztFQUVmLElBQU1DLEdBQUcsR0FBRyxJQUFBQyxxQkFBWSxFQUFDSCxlQUFlLEVBQUVmLFlBQVksQ0FBQztFQUV2RCxJQUFBbUIsZUFBQSxHQUE0QmpELEtBQUssQ0FBQ2tELFFBQVEsQ0FBQztNQUFDWixLQUFLLEVBQUc7SUFBZSxDQUFDLENBQUM7SUFBQWEsZ0JBQUEsT0FBQUMsZUFBQSxDQUFBM0MsT0FBQSxFQUFBd0MsZUFBQTtJQUE5REksTUFBTSxHQUFBRixnQkFBQTtJQUFFRyxTQUFTLEdBQUFILGdCQUFBO0VBRXhCLElBQU1JLFlBQVksR0FBRyxTQUFmQSxZQUFZQSxDQUFJQyxLQUF3QixFQUFLO0lBRWpEdkIsUUFBUSxvQkFBUkEsUUFBUSxDQUFHdUIsS0FBSyxDQUFDO0lBRWpCdEIsYUFBYSxvQkFBYkEsYUFBYSxDQUFHc0IsS0FBSyxDQUFDQyxXQUFXLENBQUNuQixLQUFLLENBQUM7SUFDeENnQixTQUFTLENBQUM7TUFBQ2hCLEtBQUssRUFBRWtCLEtBQUssQ0FBQ0MsV0FBVyxDQUFDbkI7SUFBSyxDQUFDLENBQUM7RUFDN0MsQ0FBQztFQUVEdEMsS0FBSyxDQUFDMEQsZUFBZSxDQUFDLFlBQU07SUFBQSxJQUFBQyxxQkFBQTtJQUkxQixJQUFNQyxPQUFPLEdBQUd0QixLQUFLLEtBQUssSUFBSTtJQUM5QixJQUFNdUIsd0JBQXdCLEdBQzVCUixNQUFNLENBQUNmLEtBQUssSUFBSSxJQUFJLElBQUllLE1BQU0sQ0FBQ2YsS0FBSyxLQUFLc0IsT0FBTztJQUNsRCxJQUNFQyx3QkFBd0IsSUFDeEIsRUFBQUYscUJBQUEsR0FBQWQsZUFBZSxDQUFDaUIsT0FBTyxxQkFBdkJILHFCQUFBLENBQXlCSSxjQUFjLEtBQUksSUFBSSxFQUMvQztNQUNBLElBQUlDLGlCQUFRLENBQUNDLEVBQUUsS0FBSyxTQUFTLEVBQUU7UUFDN0JDLHNDQUFxQixDQUFDQyxjQUFjLENBQUN0QixlQUFlLENBQUNpQixPQUFPLEVBQUVGLE9BQU8sQ0FBQztNQUN4RSxDQUFDLE1BQU07UUFDTFEsK0JBQWMsQ0FBQ0MsUUFBUSxDQUFDeEIsZUFBZSxDQUFDaUIsT0FBTyxFQUFFRixPQUFPLENBQUM7TUFDM0Q7SUFDRjtFQUNGLENBQUMsRUFBRSxDQUFDdEIsS0FBSyxFQUFFZSxNQUFNLENBQUMsQ0FBQztFQUVuQixJQUFJVyxpQkFBUSxDQUFDQyxFQUFFLEtBQUssU0FBUyxFQUFFO0lBQUEsSUFBQUsscUJBQUE7SUFDN0IsSUFBT0Msa0JBQWtCLEdBQUloQyxTQUFTLENBQS9CZ0Msa0JBQWtCO0lBQ3pCLElBQU1DLFNBQVMsR0FDYnpDLFFBQVEsSUFBSSxJQUFJLEdBQUdBLFFBQVEsR0FBR3dDLGtCQUFrQixvQkFBbEJBLGtCQUFrQixDQUFFeEMsUUFBUTtJQUU1RCxJQUFNMEMsbUJBQW1CLEdBQ3ZCRCxTQUFTLE1BQUtELGtCQUFrQixvQkFBbEJBLGtCQUFrQixDQUFFeEMsUUFBUSxJQUFBaEIsTUFBQSxDQUFBMkQsTUFBQSxLQUNsQ0gsa0JBQWtCO01BQUV4QyxRQUFRLEVBQUV5QztJQUFTLEtBQzNDRCxrQkFBa0I7SUFFeEIsSUFBTUksYUFBYSxHQUFHO01BQ3BCSixrQkFBa0IsRUFBRUUsbUJBQW1CO01BQ3ZDRyxPQUFPLEVBQUVKLFNBQVMsS0FBSyxJQUFJO01BQzNCSyxFQUFFLEVBQUV2QyxLQUFLLEtBQUssSUFBSTtNQUNsQkgsS0FBSyxFQUFMQSxLQUFLO01BQ0wyQyxjQUFjLEVBQUUxQyxVQUFVO01BQzFCSyxrQkFBa0IsRUFBRUEsa0JBQWtCO01BQ3RDRSxpQkFBaUIsRUFBRUEsaUJBQWlCO01BQ3BDb0MsY0FBYyxFQUFFekMsS0FBSyxLQUFLLElBQUksR0FBR0ssaUJBQWlCLEdBQUdGO0lBQ3ZELENBQUM7SUFFRCxPQUNFLElBQUF4QyxXQUFBLENBQUErRSxHQUFBLEVBQUNuRiw2QkFBQSxDQUFBWSxPQUE0QixFQUFBTSxNQUFBLENBQUEyRCxNQUFBLEtBQ3ZCbkMsU0FBUyxFQUNUb0MsYUFBYTtNQUNqQk0saUJBQWlCLEdBQUFYLHFCQUFBLEdBQUV6QyxLQUFLLENBQUNvRCxpQkFBaUIsWUFBQVgscUJBQUEsR0FBSSxRQUFTO01BQ3ZEckMsUUFBUSxFQUFFc0IsWUFBYTtNQUN2QjJCLDZCQUE2QixFQUFFMUQsWUFBYTtNQUM1QzJELHlCQUF5QixFQUFFMUQsV0FBWTtNQUN2Q3NCLEdBQUcsRUFBRUE7SUFBSSxFQUNWLENBQUM7RUFFTixDQUFDLE1BQU07SUFBQSxJQUFBcUMsc0JBQUE7SUFDTCxJQUFNVCxjQUFhLEdBQUc7TUFDcEI1QyxRQUFRLEVBQVJBLFFBQVE7TUFDUnNELFdBQVcsRUFBRTFDLGlCQUFpQjtNQUM5QlIsS0FBSyxFQUFFbUQsbUJBQVUsQ0FBQ0MsT0FBTyxDQUN2QjtRQUFDQyxNQUFNLEVBQUUsRUFBRTtRQUFFQyxLQUFLLEVBQUU7TUFBRSxDQUFDLEVBQ3ZCSCxtQkFBVSxDQUFDQyxPQUFPLENBQ2hCcEQsS0FBSyxFQUNMSCxtQkFBbUIsSUFBSSxJQUFJLEdBQ3ZCLElBQUksR0FDSjtRQUNFMEQsZUFBZSxFQUFFMUQsbUJBQW1CO1FBQ3BDMkQsWUFBWSxFQUFFO01BQ2hCLENBQ04sQ0FDRixDQUFDO01BQ0RiLGNBQWMsRUFBRTFDLFVBQVU7TUFDMUJ3RCxTQUFTLEVBQUVuRCxrQkFBa0I7TUFDN0JILEtBQUssRUFBRUEsS0FBSyxLQUFLO0lBQ25CLENBQUM7SUFFRCxPQUNFLElBQUFyQyxXQUFBLENBQUErRSxHQUFBLEVBQUNqRixzQkFBQSxDQUFBVSxPQUFxQixFQUFBTSxNQUFBLENBQUEyRCxNQUFBLEtBQ2hCbkMsU0FBUyxFQUNUb0MsY0FBYTtNQUNqQk0saUJBQWlCLEdBQUFHLHNCQUFBLEdBQUV2RCxLQUFLLENBQUNvRCxpQkFBaUIsWUFBQUcsc0JBQUEsR0FBSSxRQUFTO01BQ3ZEbkQsUUFBUSxFQUFFc0IsWUFBYTtNQUN2QjJCLDZCQUE2QixFQUFFMUQsWUFBYTtNQUM1QzJELHlCQUF5QixFQUFFMUQsV0FBWTtNQUN2Q3NCLEdBQUcsRUFBRUE7SUFBSSxFQUNWLENBQUM7RUFFTjtBQUNGLENBQUMsQ0FBQztBQUFDLElBQUE4QyxRQUFBLEdBQUFDLE9BQUEsQ0FBQXJGLE9BQUEsR0FFWWlCLHNCQUFzQiJ9