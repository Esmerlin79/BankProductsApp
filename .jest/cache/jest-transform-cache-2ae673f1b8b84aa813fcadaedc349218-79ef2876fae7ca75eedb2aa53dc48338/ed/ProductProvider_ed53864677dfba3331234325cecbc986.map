{"version":3,"names":["_react","require","_ProductContext","_ProductReducer","_productApi","_interopRequireDefault","_jsxRuntime","PRODUCT_INITIAL_STATE","products","loading","ProductProvider","exports","_ref","children","_useReducer","useReducer","productReducer","_useReducer2","_slicedToArray2","default","state","dispatch","useEffect","loadProducts","_ref2","_asyncToGenerator2","type","payload","resp","productApi","get","data","error","response","apply","arguments","createProduct","_ref3","product","post","_x","editProduct","_ref4","console","log","name","put","_x2","deleteProduct","_ref5","productId","_x3","verifyProductId","_ref6","_x4","jsx","ProductsContext","Provider","value","Object","assign"],"sources":["ProductProvider.tsx"],"sourcesContent":["import { useEffect, useReducer } from \"react\";\n\nimport { ProductsContext } from \"./ProductContext\"\nimport { productReducer } from \"./ProductReducer\";\nimport productApi from \"../api/productApi\";\nimport { Product } from \"../interfaces\";\n\n\nexport interface ProductState {\n    products: Product[];\n    loading: boolean;\n}\n\nconst PRODUCT_INITIAL_STATE: ProductState = {\n    products: [],\n    loading: false,\n}\n\nexport const ProductProvider = ({ children }: { children: JSX.Element | JSX.Element[] }) => {\n\n    const [ state, dispatch ] = useReducer(productReducer, PRODUCT_INITIAL_STATE);\n\n    useEffect(() => {\n        loadProducts();\n    }, [])\n\n    const loadProducts = async () => {\n       try {\n            dispatch({ type: 'LOADING PRODUCT', payload: true }); \n            const resp = await productApi.get<Product[]>('/bp/products');\n            dispatch({ type: 'LOAD PRODUCTS', payload: resp.data }); \n            dispatch({ type: 'LOADING PRODUCT', payload: false });   \n       } catch (error: any) {\n            return error.response.data;\n       }\n    }\n\n    const createProduct = async (product: Product) => {\n        try {\n            const resp = await productApi.post<Product>('/bp/products', product);\n            dispatch({ type: 'CREATE PRODUCT', payload: resp.data });   \n        } catch (error: any) {\n             return error.response.data;\n        }\n     }\n\n     const editProduct = async (product: Product) => {\n        try {\n            console.log(product.name)\n            const resp = await productApi.put<Product>('/bp/products', product);\n            console.log(resp.data)\n            dispatch({ type: 'UPDATE PRODUCT', payload: resp.data });   \n        } catch (error: any) {\n             return error.response.data;\n        }\n     }\n\n     const deleteProduct = async ( productId: string ): Promise<void> => {\n        try {\n            await productApi.get<boolean>(`/bp/products?id=${ productId }`);\n            dispatch({ type: 'DELETE PRODUCT', payload: productId }); \n        } catch (error: any) {\n            return error.response.data;\n        }\n    }\n\n    const verifyProductId = async ( productId: string ): Promise<boolean> => {\n        try {\n            const resp = await productApi.get<boolean>(`/bp/products/verification?id=${ productId }`);\n            return resp.data;\n        } catch (error: any) {\n            return error.response.data;\n        }\n    }\n\n    return (\n        <ProductsContext.Provider value={{\n           ...state,\n           verifyProductId,\n           createProduct,\n           editProduct,\n           deleteProduct,\n        }}>\n            { children }\n        </ProductsContext.Provider>\n    )\n}"],"mappings":"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"}