{"version":3,"names":["_View","_interopRequireDefault","require","_RCTDeviceEventEmitter","_StyleSheet","_RootTag","React","_interopRequireWildcard","_jsxRuntime","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf2","result","NewTarget","constructor","Reflect","construct","arguments","apply","_possibleConstructorReturn2","sham","Proxy","Boolean","valueOf","reactDevToolsHook","window","__REACT_DEVTOOLS_GLOBAL_HOOK__","AppContainer","_React$Component","_inherits2","_super","_this","_classCallCheck2","_len","length","args","Array","_key","concat","state","inspector","devtoolsOverlay","traceUpdateOverlay","mainKey","hasError","_subscription","_reactDevToolsAgentListener","_createClass2","key","value","mountReactDevToolsOverlays","DevtoolsOverlay","jsx","inspectedView","_mainRef","TraceUpdateOverlay","setState","componentDidMount","_this2","__DEV__","props","internal_excludeInspector","RCTDeviceEventEmitter","addListener","Inspector","onRequestRerenderApp","updateInspectedView","s","reactDevtoolsAgent","on","componentWillUnmount","remove","off","render","_this3","logBox","internal_excludeLogBox","LogBoxNotificationContainer","innerView","collapsable","pointerEvents","style","styles","appContainer","ref","children","Wrapper","WrapperComponent","initialProps","fabric","showArchitectureIndicator","RootTagContext","Provider","createRootTag","rootTag","jsxs","Component","getDerivedStateFromError","undefined","StyleSheet","create","flex","module","exports"],"sources":["AppContainer.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * @flow\n */\n\nimport type {RootTag} from './RootTag';\n\nimport View from '../Components/View/View';\nimport RCTDeviceEventEmitter from '../EventEmitter/RCTDeviceEventEmitter';\nimport StyleSheet from '../StyleSheet/StyleSheet';\nimport {type EventSubscription} from '../vendor/emitter/EventEmitter';\nimport {RootTagContext, createRootTag} from './RootTag';\nimport * as React from 'react';\n\nconst reactDevToolsHook = window.__REACT_DEVTOOLS_GLOBAL_HOOK__;\n\ntype Props = $ReadOnly<{|\n  children?: React.Node,\n  fabric?: boolean,\n  useConcurrentRoot?: boolean,\n  rootTag: number | RootTag,\n  initialProps?: {...},\n  showArchitectureIndicator?: boolean,\n  WrapperComponent?: ?React.ComponentType<any>,\n  internal_excludeLogBox?: ?boolean,\n  internal_excludeInspector?: ?boolean,\n|}>;\n\ntype State = {|\n  inspector: ?React.Node,\n  devtoolsOverlay: ?React.Node,\n  traceUpdateOverlay: ?React.Node,\n  mainKey: number,\n  hasError: boolean,\n|};\n\nclass AppContainer extends React.Component<Props, State> {\n  state: State = {\n    inspector: null,\n    devtoolsOverlay: null,\n    traceUpdateOverlay: null,\n    mainKey: 1,\n    hasError: false,\n  };\n  _mainRef: ?React.ElementRef<typeof View>;\n  _subscription: ?EventSubscription = null;\n  _reactDevToolsAgentListener: ?() => void = null;\n\n  static getDerivedStateFromError: any = undefined;\n\n  mountReactDevToolsOverlays(): void {\n    const DevtoolsOverlay = require('../Inspector/DevtoolsOverlay').default;\n    const devtoolsOverlay = <DevtoolsOverlay inspectedView={this._mainRef} />;\n\n    const TraceUpdateOverlay =\n      require('../Components/TraceUpdateOverlay/TraceUpdateOverlay').default;\n    const traceUpdateOverlay = <TraceUpdateOverlay />;\n\n    this.setState({devtoolsOverlay, traceUpdateOverlay});\n  }\n\n  componentDidMount(): void {\n    if (__DEV__) {\n      if (!this.props.internal_excludeInspector) {\n        this._subscription = RCTDeviceEventEmitter.addListener(\n          'toggleElementInspector',\n          () => {\n            const Inspector = require('../Inspector/Inspector');\n            const inspector = this.state.inspector ? null : (\n              <Inspector\n                inspectedView={this._mainRef}\n                onRequestRerenderApp={updateInspectedView => {\n                  this.setState(\n                    s => ({mainKey: s.mainKey + 1}),\n                    () => updateInspectedView(this._mainRef),\n                  );\n                }}\n              />\n            );\n            this.setState({inspector});\n          },\n        );\n\n        if (reactDevToolsHook != null) {\n          if (reactDevToolsHook.reactDevtoolsAgent) {\n            // In case if this is not the first AppContainer rendered and React DevTools are already attached\n            this.mountReactDevToolsOverlays();\n            return;\n          }\n\n          this._reactDevToolsAgentListener = () =>\n            this.mountReactDevToolsOverlays();\n\n          reactDevToolsHook.on(\n            'react-devtools',\n            this._reactDevToolsAgentListener,\n          );\n        }\n      }\n    }\n  }\n\n  componentWillUnmount(): void {\n    if (this._subscription != null) {\n      this._subscription.remove();\n    }\n\n    if (reactDevToolsHook != null && this._reactDevToolsAgentListener != null) {\n      reactDevToolsHook.off('react-devtools', this._reactDevToolsAgentListener);\n    }\n  }\n\n  render(): React.Node {\n    let logBox = null;\n    if (__DEV__) {\n      if (!this.props.internal_excludeLogBox) {\n        const LogBoxNotificationContainer =\n          require('../LogBox/LogBoxNotificationContainer').default;\n        logBox = <LogBoxNotificationContainer />;\n      }\n    }\n\n    let innerView: React.Node = (\n      <View\n        collapsable={!this.state.inspector && !this.state.devtoolsOverlay}\n        key={this.state.mainKey}\n        pointerEvents=\"box-none\"\n        style={styles.appContainer}\n        ref={ref => {\n          this._mainRef = ref;\n        }}>\n        {this.props.children}\n      </View>\n    );\n\n    const Wrapper = this.props.WrapperComponent;\n    if (Wrapper != null) {\n      innerView = (\n        <Wrapper\n          initialProps={this.props.initialProps}\n          fabric={this.props.fabric === true}\n          showArchitectureIndicator={\n            this.props.showArchitectureIndicator === true\n          }>\n          {innerView}\n        </Wrapper>\n      );\n    }\n    return (\n      <RootTagContext.Provider value={createRootTag(this.props.rootTag)}>\n        <View style={styles.appContainer} pointerEvents=\"box-none\">\n          {!this.state.hasError && innerView}\n          {this.state.traceUpdateOverlay}\n          {this.state.devtoolsOverlay}\n          {this.state.inspector}\n          {logBox}\n        </View>\n      </RootTagContext.Provider>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  appContainer: {\n    flex: 1,\n  },\n});\n\nmodule.exports = AppContainer;\n"],"mappings":"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"}